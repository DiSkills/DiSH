TESTDIR = test
TESTBUILDDIR = $(TESTDIR)/build
TESTMODULES = test_str.c test_line.c
TESTS = $(addprefix $(TESTBUILDDIR)/,$(TESTMODULES:%.c=%))

$(TESTBUILDDIR)/%: $(TESTDIR)/%.c $(OBJS)
	$(CC) $(CFLAGS) $^ -o $@

$(TESTS): | $(TESTBUILDDIR)

$(TESTBUILDDIR):
	mkdir -p $@

test: $(TESTS)
	for test in $^; do ./$$test; done
